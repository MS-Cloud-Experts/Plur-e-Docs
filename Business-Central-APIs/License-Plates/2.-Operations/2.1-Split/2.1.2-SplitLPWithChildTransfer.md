
### API Documentation: SplitLPWithChildTransfer

#### Overview
The `SplitLPWithChildTransfer` API method enables the splitting of a License Plate (LP) and the transfer of multiple child LPs to new parent LPs. This operation ensures that each child LP is correctly reassigned, and the original LP is deleted if it no longer has any children or lines associated with it.

#### Request Structure
```json
{
  "ProcessMethod": "SplitLPWithChildTransfer",
  "Parameters": [
    {
      "LPDocumentNo": "LP03",
      "LPChildToTransfer": [
        {
          "ChildLPDocumentNo": "LP02",
          "NewParentLPNo": "LP04"
        },
        {
          "ChildLPDocumentNo": "LP05",
          "NewParentLPNo": "LP06"
        }
      ]
    }
  ]
}
```

#### Parameters
- **LPDocumentNo**: The original LP number that will be split, and from which the child LPs will be transferred (e.g., `"LP03"`).
- **LPChildToTransfer**: A JSON array that specifies one or more child LPs to transfer and the new parent LP.
  - **ChildLPDocumentNo**: The LP number of the child that will be transferred (e.g., `"LP02"`).
  - **NewParentLPNo**: The LP number of the new parent LP to which the child will be transferred (e.g., `"LP04"`). If this LP does not exist, it will be created.

#### Example Request
```json
{
  "ProcessMethod": "SplitLPWithChildTransfer",
  "Parameters": [
    {
      "LPDocumentNo": "LP03",
      "LPChildToTransfer": [
        {
          "ChildLPDocumentNo": "LP02",
          "NewParentLPNo": "LP04"
        },
        {
          "ChildLPDocumentNo": "LP05",
          "NewParentLPNo": "LP06"
        }
      ]
    }
  ]
}
```

#### Example Response
```json
{
  "Message": "Split and transfer of child LPs completed successfully.",
  "NewParentLPNo": "LP06"
}
```

#### Explanation
- **Message**: A confirmation message indicating that the LP split and child transfer operation was successful.
- **NewParentLPNo**: The LP number of the last new parent LP that was created or updated during the process.

#### Process Flow
1. **Validate Original LP**: The system verifies that the original LP (e.g., `"LP03"`) exists.
2. **Process Child LP Transfers**: 
   - The system processes each child LP from the `LPChildToTransfer` array. 
   - If a new parent LP does not exist (e.g., `"LP04"`, `"LP06"`), it is automatically created.
   - The child LP (e.g., `"LP02"`, `"LP05"`) is then reassigned to the corresponding new parent LP.
3. **Delete Child Relation**: If the child LP is successfully transferred, the relationship between the original LP and the child LP is deleted.
4. **Check and Delete Original LP**: 
   - The system checks if the original LP (e.g., `"LP03"`) has any remaining children or lines.
   - If the original LP is empty (no children or lines), it is deleted.

#### Considerations
- **Multiple Child LP Transfers**: This API can handle multiple child LPs in a single request, making it suitable for complex operations where several child LPs need to be reassigned.
- **Inventory Integrity**: The API ensures that inventory integrity is maintained by validating that all child LPs are correctly reassigned, and that no orphaned LPs remain in the system.
- **Automatic Creation of New Parent LPs**: If the specified `NewParentLPNo` does not exist, the system will automatically create it, ensuring a seamless operation.
- **Original LP Deletion**: The system will only delete the original LP if it no longer contains any child LPs or lines, preventing accidental loss of data.

#### Summary
The `SplitLPWithChildTransfer` API is designed to handle the splitting of an LP and the transfer of one or more child LPs to new parent LPs. It ensures that child LPs are correctly reassigned, and it automatically manages the creation of new parent LPs and the cleanup of old LPs. This API is essential for maintaining accurate inventory tracking in complex warehouse environments.
